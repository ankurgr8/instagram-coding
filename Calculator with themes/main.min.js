function getHistory(){return document.querySelector(".upper-value").innerHTML}function printHistory(num){document.querySelector(".upper-value").innerHTML=num}function getOutput(){return document.querySelector(".lower-value").innerHTML}function printOutput(num){document.querySelector(".lower-value").innerHTML=""==num?num:getFormattedNumber(num)}function getFormattedNumber(num){if("-"==num)return"";let n,value;return Number(num).toLocaleString("en")}function reverseNumberFormat(num){return Number(num.replace(/,/g,""))}let operator=document.getElementsByClassName("operator");for(let i=0;i<operator.length;i++)operator[i].addEventListener("click",(function(){if("clear"==this.id)printHistory(""),printOutput("");else if("backspace"==this.id){let output=reverseNumberFormat(getOutput()).toString();output&&(output=output.substr(0,output.length-1),printOutput(output))}else{let output=getOutput(),history=getHistory();if(""==output&&""!=history&&isNaN(history[history.length-1])&&(history=history.substr(0,history.length-1)),""!=output||""!=history)if(output=""==output?output:reverseNumberFormat(output),history+=output,"="==this.id){let result=eval(history);printOutput(result),printHistory("")}else if("%"==this.id){let n=reverseNumberFormat(getOutput()),percent=n/100;printOutput(percent.toFixed(4))}else history+=this.id,printHistory(history),printOutput("")}}));let number=document.getElementsByClassName("number");for(let i=0;i<number.length;i++)number[i].addEventListener("click",(function(){let output=reverseNumberFormat(getOutput());NaN!=output&&(output+=this.id,printOutput(output))}));let checkbox=document.querySelector('input[name="theme"]');checkbox.addEventListener("change",(function(){this.checked?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}));